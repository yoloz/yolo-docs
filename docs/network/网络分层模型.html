<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-network/网络分层模型" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">网络分层模型 | Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://www.ylsite.tk/docs/network/网络分层模型"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="网络分层模型 | Docs"><meta data-rh="true" name="description" content="通信模型"><meta data-rh="true" property="og:description" content="通信模型"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://www.ylsite.tk/docs/network/网络分层模型"><link data-rh="true" rel="alternate" href="https://www.ylsite.tk/docs/network/网络分层模型" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://www.ylsite.tk/docs/network/网络分层模型" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Docs Atom Feed"><link rel="stylesheet" href="/assets/css/styles.e72108b9.css">
<link rel="preload" href="/assets/js/runtime~main.837efe0d.js" as="script">
<link rel="preload" href="/assets/js/main.148c1210.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="yolo-docs Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.png" alt="yolo-docs Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">yolo-docs</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/About">文档</a><a class="navbar__item navbar__link" href="/blog">博客</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/yoloz/yolo-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="搜索" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/About">About</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/AI&amp;ML/machine learning">AI&amp;ML</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/bigdata/CDH使用">bigdata</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/concept/RESTful学习">concept</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/concurrent/JAVA的锁学习">concurrent</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/database/ES-SQL">database</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/devOps/su与sudo">devOps</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/docker/dockerfile学习">docker</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/forend/HTML知识点">forend</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/golang/defer及异常处理">golang</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/java/EventBus使用">java</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/jvm/JNA中乱码和释放内存">jvm</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/linux/AIpine系统">linux</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/maven/maven-checkstyle-plugin">maven</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/netty/了解netty写">netty</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/network/cksum问题">network</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/network/cksum问题">cksum问题</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/network/linux内核接收网络包">linux内核接收网络包</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/network/tcp_timestamps">tcp_timestamps</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/network/tcpdump使用">tcpdump使用</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/network/tcp最大连接数">tcp最大连接数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/network/tcp缓冲区参数">tcp缓冲区参数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/network/tcp高延时分析">tcp高延时分析</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/network/了解tcp监听">了解tcp监听</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/network/了解tcp连接">了解tcp连接</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/network/大量小文件优化">大量小文件优化</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/network/常用网络协议格式">常用网络协议格式</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/network/网络分层模型">网络分层模型</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/network/网络层分段(片)">网络层分段(片)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/network/通信协议protobuf">通信协议protobuf</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/react/react-loadable代码分割">react</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/security/SSL双向认证实现">security</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/shell/bash和bat">shell</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/spring/cache的使用">spring</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/tools/CVEScannerV2">tools</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/vue/el-select下拉框验证">vue</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/window/nsis安装包制作">window</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">network</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">网络分层模型</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>网络分层模型</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="通信模型">通信模型<a href="#通信模型" class="hash-link" aria-label="通信模型的直接链接" title="通信模型的直接链接">​</a></h2><p><a href="https://www.cnblogs.com/qishui/p/5428938.html" target="_blank" rel="noopener noreferrer">参考</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="osi-七层模型">OSI 七层模型<a href="#osi-七层模型" class="hash-link" aria-label="OSI 七层模型的直接链接" title="OSI 七层模型的直接链接">​</a></h3><p>OSI（Open System Interconnect），即开放式系统互联。 一般都叫 OSI 参考模型，是 ISO（国际标准化组织）组织在 1985 年研究的网络互连模型。其含义就是推荐所有公司使用这个规范来控制网络。这样所有公司都有相同的规范，就能互联了。</p><p>OSI 定义了网络互连的七层框架，每一层实现各自的功能和协议，并完成与相邻层的接口通信。某一层的服务就是该层及其下各层的一种能力，它通过接口提供给更高一层。各层所提供的服务与这些服务是怎么实现的无关。</p><p><img loading="lazy" alt="OSI1" src="/assets/images/OSI1-508ee92ed185d4e070bb01cb28bf8cff.png" width="982" height="532" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tcpip-五层模型">TCP/IP 五层模型<a href="#tcpip-五层模型" class="hash-link" aria-label="TCP/IP 五层模型的直接链接" title="TCP/IP 五层模型的直接链接">​</a></h2><p>TCP/IP 五层协议和 OSI 的七层协议对应关系如下：</p><p><img loading="lazy" alt="OSI2" src="/assets/images/OSI2-c5fdf403062d2f106135c73b80108c05.png" width="689" height="531" class="img_ev3q"></p><p>在每一层都工作着不同的设备，比如我们常用的交换机就工作在数据链路层的，一般的路由器是工作在网络层的</p><p><img loading="lazy" alt="OSI3" src="/assets/images/OSI3-5cb363e58359c02c7acc103790fa3852.png" width="1388" height="531" class="img_ev3q"></p><p>在每一层实现的协议也各不同，即每一层的服务也不同.下图列出了每层主要的协议。</p><p><img loading="lazy" alt="OSI4" src="/assets/images/OSI4-67d1e0c891a8a8576981a5519542d846.png" width="1464" height="531" class="img_ev3q"></p><p>当我们应用程序用 TCP 传输数据的时候，数据被送入协议栈中，然后逐个通过每一层，知道最后到物理层数据转换成比特流，送入网络。而再这个过程中，每一层都会对要发送的数据加一些首部信息。整个过程如下图</p><p><img loading="lazy" alt="OSI5" src="/assets/images/OSI5-f8e26decf445c530e4512968372a492f.png" width="1902" height="748" class="img_ev3q"></p><p>如图可以看出：</p><ul><li>每一层数据是由上一层数据+本层首部信息组成的，其中每一层的数据,称为本层的协议数据单元,即 PDU。</li><li>应用层数据在传输层添加 TCP 报头后得到的 PDU 被称为 Segment(数据段 )，图示为 TCP 段</li><li>传输层的数据（TCP 段）传给网络层,网络层添加 IP 报头得到的 PDU 被称为 Packet(数据包); 图示为 IP 数据包</li><li>网络层数据报（IP 数据包）被传递到数据链路层,封装数据链路层报头得到的 PDU 被称为 Frame(数据帧)，图示为以太网帧。</li><li>最后,帧被转换为比特,通过网络介质传输。</li></ul><p>这种协议栈逐层向下传递数据,并添加报头和报尾的过程称为封装。反之接收方接收后会逐层向上传递并处理数据。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tcpudp-协议">TCP/UDP 协议<a href="#tcpudp-协议" class="hash-link" aria-label="TCP/UDP 协议的直接链接" title="TCP/UDP 协议的直接链接">​</a></h2><p><a href="https://www.cnblogs.com/kzang/articles/2582957.html" target="_blank" rel="noopener noreferrer">(传输层)TCP 协议</a></p><p>TCP（Transmission Control Protocol 传输控制协议）是一种面向连接的、可靠的、基于字节流的传输层通信协议，由 IETF 的 RFC 793 定义。在简化的计算机网络 OSI 模型中，它完成第四层传输层所指定的功能，用户数据报协议（UDP）是同一层内另一个重要的传输协议。</p><p>在因特网协议族（Internet protocol suite）中，TCP 层是位于 IP 层之上，应用层之下的中间层。不同主机的应用层之间经常需要可靠的、像管道一样的连接，但是 IP 层不提供这样的流机制，而是提供不可靠的包交换。</p><ul><li>TCP 的优点</li></ul><p>可靠，稳定,TCP 的可靠体现在 TCP 在传递数据之前，会有三次握手来建立连接，而且在数据传递时，有确认、窗口、重传、拥塞控制机制，在数据传完后，还会断开连接用来节约系统资源。</p><ul><li>TCP 的缺点</li></ul><p>慢，效率低，占用系统资源高，易被攻击,TCP 在传递数据之前，要先建连接，这会消耗时间，而且在数据传递时，确认机制、重传机制、拥塞控制机制等都会消耗大量的时间，而且要在每台设备上维护所有的传输连接，事实上，每个连接都会占用系统的 CPU、内存等硬件资源。</p><p>由于 TCP 存在确认机制和三次握手机制，这些是导致 TCP 容易被人利用，实现 DOS、DDOS、CC 等攻击。</p><ul><li>TCP 应用场景</li></ul><p>当对网络通讯质量有要求的时候，比如：整个数据要准确无误的传递给对方，这往往用于一些要求可靠的应用，比如 HTTP、HTTPS、FTP 等传输文件的协议，POP、SMTP 等邮件传输的协议</p><p>UDP 是 User Datagram Protocol 的简称， 中文名是用户数据报协议，是 OSI（Open System Interconnection，开放式系统互联） 参考模型中一种无连接的传输层协议，提供面向事务的简单不可靠信息传送服务，IETF RFC 768 是 UDP 的正式规范。UDP 在 IP 报文的协议号是 17。</p><ul><li>UDP 的优点</li></ul><p>快，比 TCP 稍安全,UDP 没有 TCP 的握手、确认、窗口、重传、拥塞控制等机制，UDP 是一个无状态的传输协议，所以它在传递数据时非常快。没有 TCP 的这些机制，UDP 较 TCP 被攻击者利用的漏洞就要少一些。但 UDP 也是无法避免攻击的，比如：UDP Flood 攻击……</p><ul><li>UDP 的缺点</li></ul><p>不可靠，不稳定,因为 UDP 没有 TCP 那些可靠的机制，在数据传递时，如果网络质量不好，就会很容易丢包</p><ul><li>UDP 应用场景</li></ul><p>当对网络通讯质量要求不高的时候，要求网络通讯速度能尽量的快，这时就可以使用 UDP。在日常生活中，常见使用 UDP 协议的应用比如：QQ 语音、QQ 视频、TFTP 等</p><p>TCP 和 UDP 使用 IP 协议从一个网络传送数据包到另一个网络。把 IP 想像成一种高速公路，它允许其它协议在上面行驶并找到到其它电脑的出口。TCP 和 UDP 是高速公路上的“卡车”，它们携带的货物就是像 HTTP，文件传输协议 FTP 这样的协议等。</p><p><img loading="lazy" alt="tcp2udp1" src="/assets/images/tcp2udp1-28d420b7739eb9699cb14c4f6ee6b4ab.png" width="675" height="387" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="http-协议">HTTP 协议<a href="#http-协议" class="hash-link" aria-label="HTTP 协议的直接链接" title="HTTP 协议的直接链接">​</a></h2><p>HTTP（超文本传输协议）是利用 TCP 在两台电脑(通常是 Web 服务器和客户端)之间传输信息的协议。</p><p><img loading="lazy" alt="httpformat" src="/assets/images/httpformat-1e83014f13bee892bf4a72154aa7b15f.png" width="546" height="386" class="img_ev3q"></p><p>HTTP 连接使用的是”请求-响应”方式，不仅在请求时建立连接，而且客户端向服务器端请求后，服务器才返回数据。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="https-抓包解密">Https 抓包解密<a href="#https-抓包解密" class="hash-link" aria-label="Https 抓包解密的直接链接" title="Https 抓包解密的直接链接">​</a></h3><p>https 的数据包是用对称秘钥（https 协议协商出来的随机数）加密后的密文。</p><p>对称秘钥在传输线路上是密文的（被非对称加密过），但是在 client、server 端是明文的（因为要用于加解密）。</p><p>对称秘钥如何获取？浏览器有一个接口对称秘钥会保存在”SSLKEYLOGFILE&quot;中，wireshark 有读取对称秘钥文件的接口，这样一来，就可以抓包和解密了。</p><p>说明：不要以为会获取对称秘钥就可以破解网络上任意的 https 数据包了。这个对称秘钥是临时协商出来的。你下一次访问，对称秘钥又要改变了。所以，你不参与到 client、server 端，只参与到传输过程抓包，是无法获取当时的对称秘钥的（被非对称秘钥加了密），也就无法解密 https 的。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="socket">Socket<a href="#socket" class="hash-link" aria-label="Socket的直接链接" title="Socket的直接链接">​</a></h2><p>套接字（socket）是通信的基石，是支持 TCP/IP 协议的网络通信的基本操作单元。它是网络通信过程中端点的抽象表示，包含进行网络通信必须的五种信息：连接使用的协议，本地主机的 IP 地址，本地进程的协议端口，远地主机的 IP 地址，远地进程的协议端口。</p><p>TCP/IP 只是一个协议栈，就像操作系统的运行机制一样，必须要具体实现，同时还要提供对外的操作接口。就像操作系统会提供标准的编程接口，比如 Win32 编程接口一样，TCP/IP 也必须对外提供编程接口，这就是 Socket 编程接口。</p><p>在 Socket 编程接口里，设计者提出了一个很重要的概念，那就是 socket。这个 socket 跟文件句柄很相似，实际上在 BSD 系统里就是跟文件句柄一样存放在一样的进程句柄表里。这个 socket 其实是一个序号，表示其在句柄表中的位置。这一点，我们已经见过很多了，比如文件句柄，窗口句柄等等。这些句柄，其实是代表了系统中的某些特定的对象，用于在各种函数中作为参数传入，以对特定的对象进行操作--这其实是 C 语言的问题，在 C++语言里，这个句柄其实就是 this 指针，实际就是对象指针啦。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="arp-与-rarp-协议">ARP 与 RARP 协议<a href="#arp-与-rarp-协议" class="hash-link" aria-label="ARP 与 RARP 协议的直接链接" title="ARP 与 RARP 协议的直接链接">​</a></h2><p><a href="https://www.cnblogs.com/kzang/articles/2582349.html" target="_blank" rel="noopener noreferrer">参考</a></p><p><img loading="lazy" alt="arp2rarp1" src="/assets/images/arp2rarp1-faa546000fda495760589fb776109d69.png" width="346" height="112" class="img_ev3q"></p><p>教材上把 ARP 协议划到网络层，是因为 ARP 协议属于 TCP/IP 协议簇。在 TCP/IP 模型中，它所有定义的协议是在网际层上的。</p><p>再看按照 OSI 的标准，数据在传递时每层会加上自己的信息。当网络层的 IP 包进入链路层时，链路层通过 ARP 协议添加链路信息，而这不是网络层的功能。所以有很多人说 ARP 是链路层的。</p><p>如此可以，<strong>在 OSI 模型中 ARP 协议属于链路层；在 TCP/IP 模型中，ARP 协议属于网络层</strong>。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="arp">ARP<a href="#arp" class="hash-link" aria-label="ARP的直接链接" title="ARP的直接链接">​</a></h3><p>ARP 协议是“Address Resolution Protocol”（地址解析协议）的缩写。每一个主机都设有一个 ARP 高速缓存(ARP cache),里面有所在的局域网上的各主机和路由器的 IP 地址到硬件地址的映射表。</p><p>在局域网中，网络中实际传输的是“帧”，帧里面是有目标主机的 MAC 地址的。在以太网中，一个主机要和另一个主机进行直接通信，必须要知道目标主机的 MAC 地址。但这个目标 MAC 地址是如何获得的呢？它就是通过地址解析协议获得的。所谓“地址解析”就是主机在发送帧前将目标 IP 地址转换成目标 MAC 地址的过程。ARP 协议的基本功能就是通过目标设备的 IP 地址，查询目标设备的 MAC 地址，以保证通信的顺利进行。</p><ul><li>步骤</li></ul><p><img loading="lazy" alt="arp1" src="/assets/images/arp1-e4f2b9561f3ea41913b5b5aeab8f3c5f.png" width="657" height="563" class="img_ev3q"></p><ul><li>注意<ul><li>网络上其他主机并不响应 ARP 询问,只有接收端主机接收到这个帧时,才向发送端主机做出这样的回应</li><li>ARP 是解决同一个局域网上的主机或路由器的 IP 地址和硬件地址的映射问题.若所要找的主机和源主机不在同一个局域网上,那么就要通过 ARP 找到一个位于本局域网上的某个路由器的硬件地址,然后把分组发送给这个路由器,让这个路由器把分组转发给下一个网络.剩下的工作就由下一个网络来做</li><li>从 IP 地址到硬件地址的解析是自动进行的,主机的用户对这种地址解析过程是不知道的.</li><li>主机或路由器要和本网络上另一个已知 IP 地址的主机或路由器进行通信,ARP 协议会自动地将该 IP 地址解析为链路层所需要的硬件地址</li></ul></li><li>四种典型情况<ul><li>发送方是主机,要把 IP 数据报发送到本网络上的另一个主机.这时用 ARP 找到目的主机的硬件地址</li><li>发送方是主机要把 IP 数据报发送到其他网络的主机.这时 ARP 找到本网络上某个路由器硬件地址.剩下工作由这个路由器完成</li><li>发送方是路由器,要把 IP 数据报转发到本网络上的一个主机.这时用 ARP 找到目的主机的硬件地址</li><li>发送方是路由器,要把 IP 数据报转发到另一个网络上的一个主机.这时用 ARP 找到本网络上的一个路由器的硬件地址.剩下的工作由这个路由器来完成</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="rarp">RARP<a href="#rarp" class="hash-link" aria-label="RARP的直接链接" title="RARP的直接链接">​</a></h3><p>RARP 协议是&quot;Reverse Address Resolution Protocol&quot;（反向地址转换协议）的缩写。RARP 协议允许局域网的物理机器从网关服务器的 ARP 表或者缓存上请求其 IP 地址。网络管理员在局域网网关路由器里创建一个表以映射物理地址（MAC）和与其对应的 IP 地址。当设置一台新的机器时，其 RARP 客户机程序需要向路由器上的 RARP 服务器请求相应的 IP 地址。假设在路由表中已经设置了一个记录，RARP 服务器将会返回 IP 地址给机器，此机器就会存储起来以便日后使用。<strong>RARP 协议曾经作为逆向的地址解析协议和 ARP 配合使用，但是现在 RARP 协议已经被淘汰，在 DHCP（动态主机配置协议）协议中已经包含了 RARP 的功能，所以大家现在主要关注的是 ARP</strong>。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="icmp-协议">ICMP 协议<a href="#icmp-协议" class="hash-link" aria-label="ICMP 协议的直接链接" title="ICMP 协议的直接链接">​</a></h2><p>ICMP（Internet Control Message Protocol）Internet 控制报文协议。制定万维网规格的 IETF 在 1981 年将 RFC7922 作为 ICMP 的基本规格整理出来了。那个 RFC792 的开头部分里写着<strong>ICMP 是 IP 的不可缺少的部分，所有的 IP 软件必须实现 ICMP 协议</strong>。ICMP 是为了分担 IP 一部分功能而被制定出来的。</p><ul><li>要点<ul><li>允许主机和路由器报告差错情况和提供有关异常情况的报告</li><li>ICMP 不是高层协议,而是 IP 层的协议</li><li>ICMP 报文作为 IP 层数据报的数据,加上数据报的首部,组成 IP 数据报发送出去</li><li>ICMP 报文的前 4 个字节是统一的格式,共有三个字段：即类型,代码和检验和.接着的 4 个字节的内容与 ICMP 的类型有关</li></ul></li></ul><p>种类</p><ul><li><p>ICMP 差错报告报文</p><ul><li>终点不可达</li><li>源点抑制(Source quench)</li><li>时间超过</li><li>参数问题</li><li>改变路由（重定向）(Redirect)</li></ul></li><li><p>ICMP 询问报文:</p><ul><li>回送请求和回答报文</li><li>时间戳请求和回答报文</li></ul></li><li><p>不应发送 ICMP 差错报告报文的情况:</p><ul><li>对第一个分片的数据报片的所有后续数据报片都不发送 ICMP 差错报告报文</li><li>多播地址的数据报都不发送 ICMP 差错报告报文</li><li>特殊地址(如 127.0.0.0 或 0.0.0.0)的数据报不发送 ICMP 差错报告报文</li></ul></li></ul><p><a href="https://www.cnblogs.com/iiiiher/p/8513748.html" target="_blank" rel="noopener noreferrer">完全理解 icmp 协议</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="igmp-协议">IGMP 协议<a href="#igmp-协议" class="hash-link" aria-label="IGMP 协议的直接链接" title="IGMP 协议的直接链接">​</a></h2><p>IGMP(Internet Group Management Protocol)互联网组管理协议是 TCP/IP 协议族中负责 IP 组播成员管理的协议，用来在 IP 主机和与其直接相邻的组播路由器之间建立、维护组播组成员关系。到目前为止，IGMP 有三个版本：</p><ul><li>IGMPv1(由 RFC 1112 定义)</li><li>IGMPv2(由 RFC 2236 定义)</li><li>IGMPv3(由 RFC 3376 定义)</li></ul><p>所有版本的 IGMP 都支持 ASM(Any-Source Multicast，任意信源组播)模型;IGMPv3 可以直接应用于 SSM(Source-Specific Multicast，指定信源组播)模型，而 IGMPv1 和 IGMPv2 则需要在 IGMP SSM Mapping 技术的支持下才能应用于 SSM 模型。</p><p>两个阶段:</p><ul><li>加入<br>当主机加入新的多播组时,向多播组的多播地址发送 IGMP 报文,声明自己要成为该组的成员.本地的多播路由器收到 IGMP 报文后,将组成员关系转发给因特网上的其他多播路由器</li><li>询问<br>周期性地探询本地局域网上的主机,以便知道这些主机是否还继续是组的成员</li></ul><p>注意:</p><ul><li>因为组成员关系是动态的，因此本地多播路由器要只要对某个组有一个主机响应，那么多播路由器就认为这个组是活跃的</li><li>但一个组在经过几次的探询后仍然没有一个主机响应，则不再将该组的成员关系转发给其他的多播路由器</li></ul><p><strong>IGMP 使用 IP 数据报传递其报文（即 IGMP 报文加上 IP 首部构成 IP 数据报），但它也向 IP 提供服务</strong></p><p>具体措施:</p><ul><li>在主机和多播路由器之间的所有通信都是使用 IP 多播</li><li>多播路由器在探询组成员关系时，只需要对所有的组发送一个请求信息的询问报文，而不需要对每一个组发送一个询问报文。默认的询问速率是每 125 秒发送一次</li><li>当同一个网络上连接有几个多播路由器时，它们能够迅速和有效地选择其中的一个来探询主机的成员关系</li><li>在 IGMP 的询问报文中有一个数值 N，它指明一个最长响应时间（默认值为 10 秒）。当收到询问时，主机在 0 到 N 之间随机选择发送响应所需经过的时延。对应于最小时延的响应最先发送</li><li>同一个组内的每一个主机都要监听响应，只要有本组的其他主机先发送了响应，自己就可以不再发送响应了</li></ul><p><a href="https://network.51cto.com/art/201901/590835.htm" target="_blank" rel="noopener noreferrer">IGMP 工作机制</a></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/yoloz/yolo-docs/tree/docusaurus/docs/network/网络分层模型.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/network/常用网络协议格式"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">常用网络协议格式</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/network/网络层分段(片)"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">网络层分段(片)</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#通信模型" class="table-of-contents__link toc-highlight">通信模型</a><ul><li><a href="#osi-七层模型" class="table-of-contents__link toc-highlight">OSI 七层模型</a></li></ul></li><li><a href="#tcpip-五层模型" class="table-of-contents__link toc-highlight">TCP/IP 五层模型</a></li><li><a href="#tcpudp-协议" class="table-of-contents__link toc-highlight">TCP/UDP 协议</a></li><li><a href="#http-协议" class="table-of-contents__link toc-highlight">HTTP 协议</a><ul><li><a href="#https-抓包解密" class="table-of-contents__link toc-highlight">Https 抓包解密</a></li></ul></li><li><a href="#socket" class="table-of-contents__link toc-highlight">Socket</a></li><li><a href="#arp-与-rarp-协议" class="table-of-contents__link toc-highlight">ARP 与 RARP 协议</a><ul><li><a href="#arp" class="table-of-contents__link toc-highlight">ARP</a></li><li><a href="#rarp" class="table-of-contents__link toc-highlight">RARP</a></li></ul></li><li><a href="#icmp-协议" class="table-of-contents__link toc-highlight">ICMP 协议</a></li><li><a href="#igmp-协议" class="table-of-contents__link toc-highlight">IGMP 协议</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 yolo. Built with ❤️ using Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.837efe0d.js"></script>
<script src="/assets/js/main.148c1210.js"></script>
</body>
</html>